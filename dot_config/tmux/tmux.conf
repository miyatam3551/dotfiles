##### プレフィクスキー設定 ##########################################
# プレフィクスキーを Ctrl+B → Ctrl+Space に変更
set -g prefix C-Space
unbind C-b
bind C-Space send-prefix

# ネストしたtmux用: Ctrl+f でリモート側にプレフィクスを送信
bind -n C-f send-prefix

##### モード設定 ####################################################

# SSH接続でクリップボードを有効にする
set -g set-clipboard on
set -g allow-passthrough on

# copy-mode を vi キーバインドに変更
set -g mode-keys vi

# マウス操作を有効化（ペイン切替・リサイズ・スクロール）
set -g mouse on

# ターミナルタイプを256色に設定（mac等では tmux-256color 推奨）
set -g default-terminal "tmux-256color"

# SSH_AUTH_SOCK を tmux がいじらないようにする
set -g update-environment -SSH_AUTH_SOCK

##### ウィンドウ・ペイン操作 ########################################

# ウィンドウ作成時に名前を指定（prefix + C）
bind C command-prompt -p "Window name:" "new-window -n '%%'"

# ペイン分割
bind \\ split-window -h   # 横分割 (右側に新ペイン)
bind | split-window -h    # 横分割 (同上、|でも可)
bind - split-window -v    # 縦分割 (下側に新ペイン)

# ペイン移動 (vi風 hjkl)
bind j last-pane
bind k select-window -t :+1

# ダブルクリックで自動整列
bind -n DoubleClick1Pane select-layout tiled

##### クリップボード操作 #############################################

# viコピー後にMacのクリップボードへ
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"

##### ステータスバー設定 ##############################################

# ステータスバー配色（背景黒、文字白）
set -g status-style "bg=black,fg=white"

# 左: セッション名
set -g status-left "#[bg=blue,fg=white] #S "

# 右: 日時表示
set -g status-right "#[bg=black,fg=green] %Y-%m-%d %H:%M:%S "

# 背景色変更用のサンプル（無効化中）
# set -g status-bg "colour236"
